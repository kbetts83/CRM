{% extends "main.html" %}
{% block content%}

<div class="container-fluid px-5 py-3" >
	<p class="h2"> Admin </p>
	<div class="container-fluid px-0 py-1" >
		<hr class="rounded">
		<p class="h3"> Blog </p>
		<div class=" px-0 py-1" > <a href="{{ url_for('create_blog') }}" class="btn btn-success" role="button">Create Blog</a> </div>
		<div>
			<!-- if there are any blogs, make a list -->
			{% if check_id > 0 %}
			<!-- if there is a  set the table headers -->
			<table class="table">
				<thead>
					<tr>
						{% set post = posts[0] %} <!-- get one set of posts for the headers -->
						{% for key, value in post.items() %}
						<th scope="col">{{key}} </th> 
						{% endfor %}
					</tr>
				</thead>
				<tbody>

					{% for post in posts %}
					{% for key, value in post.items() %}
					{% if key == 'id' %}
					<tr>
						<th scope="row">{{post.id}}</th>
						
						{% else %}
						<td> {{value | safe}} </td>
						{% endif %} 
						{% endfor %}
						<td> <a href="{{ url_for('edit_blog',id = post.id)}}"> Edit</a></td>

						<!-- modal for delete button-->
						<td> 
							<!-- Link for modal -->
							 <a href="#" data-toggle="modal" data-target="#deletemodal"> Delete </a>
	
							<!-- Modal  to delete-->
							<div class="modal fade" id="deletemodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLongTitle">Delete Blog {{ post.id}}?</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<b> {{ post.title }} </b>
											 {{ post. content | safe}}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
											
											<div class=" px-0 py-1" > <a href="{{ url_for('delete_blog',id = post.id)}}" class="btn btn-danger" role="button">Delete</a>

										</div>
									</div>
								</div>
							</div>

						</td>
						{% endfor %}

					</tr>
				</tbody>

				{% endif %}

				{% if check_id == 0 %}
				No Blog Posts
				{% endif %}



				{% endblock %}

			</div>

